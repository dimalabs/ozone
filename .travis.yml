language: java
jdk:
  - oraclejdk7
  - openjdk7
  - openjdk6
env:
    global: 
        # username and password for sonatype (maven delpoy)
        - secure: "QoLd3npmApUw20q+KTt+6Il07bn/edl5pP3jmEqR+rXQXVA2kogjkZerZ5QdM2iQJha7D1M2Y4BTcsJ2Ty7biTxUZkDl+RXz6kpeHPX2alax/KO7mqrJuEfuPAQvaIdHNmKEmdiU/fLMn2q2HllE5MP7FzUNKD5YJIzh1IekPA8="
        - secure: "WzMGwNwWwWw62kwvknMGS4W1zy3oRVihitCjjd5wqk/4JMTeWr+oAMv0GfA8GbOuOcYwA7JNxGXQlBMtn45+/PMLJgnsLxYUbqCD2ybwMBLlnembGYoRPABp5zkuzRmU3G2cbMdu/7VwvlTffEPPG/jqAFLKxmvG0oIOtPtk3lg="
        # DOPA_USER and DOPA_PASS
        - secure: "ntw3Gptom4JMVLpHOeEULcX62W2GbSAG/mLBTCu5sx8++imcN8mKCsgKe0f31tYoYS9vLFtoj/9+6Ar7kbWL2fDYnMlYJActQjsk7+W/ffD4DloV0MTpDs3MFR6G6HwKAB36z3vnHn9YcIIQJ7EThb6iSxviPwhY8Zx6wOjp7Fg="
        - secure: "axUYH3fpUAKsYHHey1HgZ1+FaU0hgwXsG7x2V4p3dAjwgrnu0PAxJU91qI1oMQQ7ckGNaS2+G/5Tx16ryOq95PqlzlWO5EQJtPpX8R40f53ozBUN2ITCAgFsSEXeIs6sdk8kqfxGU36E9ovfG8EO2lJDV/ZysElz8a5NKHGpsvo="
    matrix:
        - PROFILE=
        - PROFILE="-Dhadoop.profile=2"

install: true

script: "mvn $PROFILE clean verify"

# deploy if the first job is successful; should be replaced by an after_all_success if travis finally supports it
after_success: 
- "./tools/deploy_to_maven.sh"
